# ðŸ“˜ Report: Media Mix Modeling

---

## ðŸŽ¯ **Objective**

The objective was to build a Media Mix Model (MMM) to understand how media channels, control variables, and regional factors contribute to sales. The goal was not only to estimate channel effectiveness but also to inform ROI-driven marketing allocation strategies across time and geography.

---

## 1. **Methodology â€“ Step by Step**

This analysis was conducted in **Python 3.12.4**, using the following libraries:

| Library                 | Purpose                                                                 |
| ----------------------- | ----------------------------------------------------------------------- |
| `pandas`, `numpy`       | Data manipulation and calculations                                      |
| `matplotlib`, `seaborn` | Exploratory data analysis and visualizations                            |
| `statsmodels`           | Regression modeling and residual diagnostics (Ljung-Box, Breuschâ€“Pagan) |

---

### a. **Data Preparation**

* Dataset contained **6,240 observations** over **40 geographies** and **weekly time periods**.
* Confirmed that:

  * âœ… **0 null values** were present
  * âœ… **0 duplicate records** were found
* Converted `date` to datetime format and extracted: `year`, `month`, `quarter`, and `weekofyear`.

---

### b. **Feature Engineering**

#### 1. **Geographic Encoding**

* The `geo` field (categorical) was converted to binary dummy variables using `pd.get_dummies()` with `drop_first=True`.
* Purpose: to **capture fixed regional effects** like base demand, local marketing behavior, or infrastructure differences across geographies.

#### 2. **Temporal Features**

* Instead of using `month` or `year` directly, **cyclical transformations** were applied:

  ```python
  data['month_sin'] = np.sin(2 * np.pi * data['month'] / 12)
  data['month_cos'] = np.cos(2 * np.pi * data['month'] / 12)
  ```
* These features capture **seasonality without introducing artificial linearity**, such as treating December and January as distant. Resalta con ejemplos como el tener los meses por mes mete mÃ¡s ruido


## ðŸ“Š Correlation Analysis

### 1. **Heatmap of Features**

* A Pearson correlation heatmap was generated to explore pairwise relationships between numerical features.

### 2. **Correlation with Sales**

* Top correlated variables with `sales`:

| Most Positive  | Corr   | Most Negative              | Corr    |
| -------------- | ------ | -------------------------- | ------- |
| `population`   | 0.7987 | `competitor_sales_control` | â€“0.1167 |
| `search_spend` | 0.4689 | `sentiment_score_control`  | â€“0.0094 |
| `tv_spend`     | 0.4137 |                            |         |

#### ðŸ§  On control variables:

* `competitor_sales_control` showed a clear **negative correlation**, confirming that **competitor activity reduces our sales**.
* `sentiment_score_control` had a **very weak negative correlation**, suggesting that sentiment effects are minimal or diluted across geographies.

Has enfasis sobre como poblacion tene correlacion positiva obvia con respecto a sales.

**ðŸ“· Recommended Visuals:**

* Page 5: Heatmap of all features.
* Barplots of top 5 positive/negative correlations.

---

## ðŸ“ˆ Seasonality and Time-Series Structure

### 1. **Outlier Detection**

* A boxplot over the `sales` distribution was used to detect **extreme values**.

### 2. **Time-Series Decomposition**

* Used `seasonal_decompose()` on `Geo0` weekly sales:

  * `Trend`: Slight decline observed from mid-2022 to late 2023
  * `Seasonality`: Weekly cycles clearly visible
  * `Residual`: Fairly balanced and unsystematic

* While it did not isolate Q4 explicitly, it indicated where **spikes in sales** might suggest seasonality.

Has enfasis en que los posibles eventos de los residuos.

**ðŸ“· Recommended Visual:**

* Page 9: Seasonal decomposition plot with red markers on peak sales weeks.

---

### c. **Modeling**

Antes del entrenado del modelo se calculos el adstrock y saturation, porque son relevantes para calcular de forma mÃ¡s certera el comportamiento de variables que influyen en el nÃºmeor de ventas. Aqui justifica de forma complementaria porque solo se consideraron las varibales de spend y no las impresiones...

#### **Adstock & Saturation**

* Media channels (`tv_spend`, `radio_spend`, etc.) were:

  * Transformed with **adstock** using `decay = 0.5` to simulate lagged effects:

    ```python
    adstock[t] = spend[t] + decay * adstock[t-1]
    ```
  * Transformed with **logarithmic saturation** (`np.log1p(...)`) to model diminishing returns.

---

* Trained an **Ordinary Least Squares (OLS)** regression model using:

  * `*_spend_transformed` (adstock + saturation)
  * Temporal seasonality (`month_sin`, `month_cos`)
  * Control variables (`population`, `competitor_sales_control`, `sentiment_score_control`)
  * Regional dummies (`geo_*`)

#### ðŸ”¹ Model Results Summary:

| Metric         | Value |
| -------------- | ----- |
| RÂ²             | 0.696 |
| Adj. RÂ²        | 0.694 |
| F-statistic    | 295.2 |
| N observations | 6,240 |

#### âœ… Key Findings from Coefficients:

* **TV, Print, and Search** had statistically significant and **positive coefficients** (`p < 0.05`).
* **Social** was not significant at global level.
* Control variables:

  * `competitor_sales_control`: negative, large magnitude, highly significant.
  * `sentiment_score_control`: negative, significant, but low effect size.

---

## ðŸ“ˆ ROI and Contribution Estimation

Using the final model coefficients:

* **Contribution** = Î² Ã— mean(transformed spend)
* **ROI** = Contribution / mean(actual spend)

| Channel | ROI  | Contribution |
| ------- | ---- | ------------ |
| TV      | 6.95 | 45,166       |
| Print   | 4.66 | 9,025        |
| Social  | 3.05 | 23,329       |
| Radio   | 2.73 | 13,701       |
| Search  | 0.13 | 1,828        |

**ðŸ“· Recommended Visual:**
Page 15: Dual barplots showing contribution and ROI by channel.

y esto que nos dice? que campaÃ±a es mejor o cual peor?




